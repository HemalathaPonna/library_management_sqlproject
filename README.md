##Table Creation: Created tables for branches, employees, members, books, issued status, and return status. Each table includes relevant columns and relationships.


CREATE TABLE BRANCH (
	BRANCH_ID VARCHAR(10) PRIMARY KEY,
	MANAGER_ID VARCHAR(10),
	BRANCH_ADDRESS VARCHAR(50),
	CONTACT_NO VARCHAR(10)
);

ALTER TABLE BRANCH
ALTER COLUMN CONTACT_NO TYPE VARCHAR(25);

CREATE TABLE EMPLOYEES (
	EMP_ID VARCHAR(10) PRIMARY KEY,
	EMP_NAME VARCHAR(25),
	POSITION VARCHAR(15),
	SALARY INT,
	BRANCH_ID VARCHAR(10)
);

CREATE TABLE BOOKS (
	ISBN VARCHAR(20) PRIMARY KEY,
	BOOK_TITLE VARCHAR(30),
	CATEGORY VARCHAR(10),
	RENTAL_PRICE FLOAT,
	STATUS VARCHAR(15),
	AUTHOR VARCHAR(35),
	PUBLISHER VARCHAR(55)
);

ALTER TABLE BOOKS
ALTER COLUMN STATUS TYPE BOOLEAN USING CASE
	WHEN STATUS = 'yes' THEN TRUE
	WHEN STATUS = 'no' THEN FALSE
	ELSE NULL
END;

ALTER TABLE BOOKS
ALTER COLUMN BOOK_TITLE TYPE VARCHAR(40);

ALTER TABLE BOOKS
ALTER COLUMN CATEGORY TYPE VARCHAR(25);

CREATE TABLE MEMBERS (
	MEMBER_ID VARCHAR(20) PRIMARY KEY,
	MEMBER_NAME VARCHAR(25),
	MEMBER_ADDRESS VARCHAR(75),
	REG_DATE DATE
);

CREATE TABLE ISSUED_STATUS (
	ISSUED_ID VARCHAR(10) PRIMARY KEY,
	ISSUED_MEMBER_ID VARCHAR(10),
	ISSUED_BOOK_NAME VARCHAR(75),
	ISSUED_DATE DATE,
	ISSUED_BOOK_ISBN VARCHAR(25),
	ISSUED_EMP_ID VARCHAR(10)
);

CREATE TABLE RETURN_STATUS (
	RETURN_ID VARCHAR(10) PRIMARY KEY,
	ISSUED_ID VARCHAR(10),
	RETURN_BOOK_NAME VARCHAR(75),
	RETURN_DATE DATE,
	RETURN_BOOK_ISBN VARCHAR(20)
);

ALTER TABLE ISSUED_STATUS
ADD CONSTRAINT FK_MEMBERS FOREIGN KEY (ISSUED_MEMBER_ID) REFERENCES MEMBERS (MEMBER_ID);

SELECT
	*
FROM
	ISSUED_STATUS;

ALTER TABLE ISSUED_STATUS
ADD CONSTRAINT FK_BOOKS FOREIGN KEY (ISSUED_BOOK_ISBN) REFERENCES BOOKS (ISBN);

SELECT
	*
FROM
	ISSUED_STATUS;

ALTER TABLE ISSUED_STATUS
ADD CONSTRAINT FK_EMPLOYEES FOREIGN KEY (ISSUED_EMP_ID) REFERENCES EMPLOYEES (EMP_ID);

SELECT
	*
FROM
	ISSUED_STATUS;

ALTER TABLE EMPLOYEES
ADD CONSTRAINT FK_BRANCH FOREIGN KEY (BRANCH_ID) REFERENCES BRANCH (BRANCH_ID);

ALTER TABLE RETURN_STATUS
ADD CONSTRAINT FK_ISSUED_STATUS FOREIGN KEY (ISSUED_ID) REFERENCES ISSUED_STATUS (ISSUED_ID);
